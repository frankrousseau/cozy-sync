{"version":3,"sources":["app/client.coffee","app/initialize.coffee","app/spinner.coffee"],"names":[],"mappings":"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","file":"public/javascripts/app.js","sourcesContent":["# Simple HTTP client to request backend easily.\nmodule.exports =\n    get: (url, callbacks) ->\n        $.ajax\n            type: 'GET'\n            url: url\n            success: (response) =>\n                if response.success\n                    callbacks.success response\n                else\n                    callbacks.error response\n            error: (response) =>\n                callbacks.error response\n\n    post: (url, data, callbacks) ->\n        $.ajax\n            type: 'POST'\n            url: url\n            data: JSON.stringify data\n            dataType: \"json\"\n            success: (response) =>\n                if response.success\n                    callbacks.success response\n                else\n                    callbacks.error response\n            error: (response) =>\n                callbacks.error response\n\n","# initialize jquery spin plugin\nrequire './spinner'\n\n# Password visibility management\n\n# creates a placeholder for the password\ngetPlaceholder = (password) ->\n    placeholder = []\n    placeholder.push '*' for i in [1..password.length] by 1\n    return placeholder.join ''\n\npassword = $ '#password-span'\npassword.html getPlaceholder window.password\n\nshowPasswordButton = $ '#show-password'\nhidePasswordButton = $ '#hide-password'\n\nshowPasswordButton.click ->\n    password.text window.password\n    showPasswordButton.hide()\n    hidePasswordButton.show()\n\nhidePasswordButton.click ->\n    password.text getPlaceholder window.password\n    hidePasswordButton.hide()\n    showPasswordButton.show()\n\n\n# Reset token management\nbutton = $ '#generate-btn'\nbuttonLabel = button.html()\nisUpdating = false\nbutton.startLoading = ->\n    button.text '&nbsp;'\n    button.spin 'tiny'\nbutton.endLoading = ->\n    button.spin()\n    button.html buttonLabel\n\nclient = require './client'\nbutton.click ->\n    unless isUpdating\n        isUpdating = true\n        button.startLoading()\n        client.post 'token', {},\n            success: (data) ->\n                $('#password-span').html data.account.token\n                button.endLoading()\n                isUpdating = false\n            error: (err) ->\n                button.endLoading()\n                isUpdating = false\n\n\n# Menu management\n$('.tab.caldav').click ->\n    $('.tab.caldav.selected').removeClass 'selected'\n    $('.caldavconf:visible').hide()\n    $(this).addClass 'selected'\n    device = $(this).data 'device'\n    $(\".caldavconf[data-device='#{device}']\").show()\n\n$('.tab.carddav').click ->\n    $('.tab.carddav.selected').removeClass 'selected'\n    $('.carddavconf:visible').hide()\n    $(this).addClass 'selected'\n    device = $(this).data 'device'\n    $(\".carddavconf[data-device='#{device}']\").show()\n\n$('select#calendar').change (ev)->\n    $('option#placeholder').remove()\n    #https://#{domain}/public/sync/calendars/me/THE_CALENDAR\n    #iosuri :  #{domain}/public/sync/principals/me\n    domain = $('#iosuri').text().split('/')[0]\n\n    $('#thunderbirduri').text(\n        'https://' + domain + '/public/sync/calendars/me/' + this.value)","# Prepare spin\n$.fn.spin = (opts, color, content) ->\n    presets =\n        tiny:\n            lines: 8\n            length: 2\n            width: 2\n            radius: 3\n\n        small:\n            lines: 8\n            length: 1\n            width: 2\n            radius: 5\n\n        large:\n            lines: 10\n            length: 8\n            width: 4\n            radius: 8\n\n    if Spinner\n        @each ->\n            $this = $ this\n            $this.html \"&nbsp;\"\n            spinner = $this.data \"spinner\"\n            if spinner?\n                spinner.stop()\n                $this.data \"spinner\", null\n                $this.html content\n\n            else if opts isnt false\n                if typeof opts is \"string\"\n                    if opts of presets\n                        opts = presets[opts]\n                    else\n                        opts = {}\n                    opts.color = color if color\n                spinner = new Spinner(\n                    $.extend(color: $this.css(\"color\"), opts))\n                spinner.spin this\n                $this.data \"spinner\", spinner\n\n    else\n        console.log \"Spinner class not available.\"\n        null"]}